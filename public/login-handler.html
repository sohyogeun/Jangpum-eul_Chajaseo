<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>로그인 처리 중...</title>
    <script>
        // 이 페이지가 로드되는 즉시 실행됩니다.
        try {
            // 1. URL에서 서버가 보내준 유저 ID를 추출합니다.
            const params = new URLSearchParams(window.location.search);
            const userId = params.get('userId');

            if (userId) {
                // 2. [핵심] localStorage에 'currentUser'를 저장합니다.
                // 이 순간, head_log.js의 'storage' 이벤트 리스너가
                // 다른 탭들에게 "로그인됐다!"고 알립니다.
                localStorage.setItem('currentUser', userId);
            }

            // 3. 처리가 끝났으니 진짜 메인 페이지로 이동합니다.
            window.location.replace('/mainpage.html');

        } catch (e) {
            // 실패 시 로그인 페이지로 보냅니다.
            console.error('로그인 처리 실패:', e);
            window.location.replace('/login.html');
        }
    </script>
</head>

<body>
    <p>로그인 처리 중입니다. 잠시만 기다려주세요...</p>
</body>

</html>